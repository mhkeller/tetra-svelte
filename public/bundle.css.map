{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../src/App.svelte",
    "../src/components/Camera.svelte",
    "../src/components/Box.svelte",
    "../src/components/TranslateDrawer.svelte"
  ],
  "sourcesContent": [
    "<script>\n\timport Camera from './components/Camera.svelte';\n</script>\n\n<style>\n\t:global(body) {\n\t\tbackground-color: #000;\n\t}\n</style>\n\n<Camera/>\n\n",
    "<script>\nimport scaleCanvas from '../modules/scaleCanvas.js';\nimport Box from './Box.svelte';\nimport TranslateDrawer from './TranslateDrawer.svelte';\nimport { onMount } from 'svelte';\nimport { wordToTranslate } from '../modules/stores.js';\n\nlet width;\nlet height;\nlet boxes;\nlet wtt = null;\nlet imageContainer;\nlet canvasContainer;\n\nconst lang = 'fr';\n// let srcOrientation;\n\nconst ocrKey = window.localStorage.getItem('ocr_key');\n\nwordToTranslate.subscribe(val => {\n\twtt = val;\n});\n\nfunction imageLoaded (canvas) {\n\tcanvasContainer.innerHTML = '';\n\tcanvasContainer.appendChild(canvas);\n\twidth = canvas.style.width.replace('px', '');\n\theight = canvas.style.height.replace('px', '');\n\tconsole.log('aaaa', width, height);\n\tconst base64 = canvas.toDataURL().split(',')[1];\n\tdoOcr(base64);\n}\n\nfunction doOcr (base64) {\n\t(async () => {\n\t\tconst response = await window.fetch(`https://vision.googleapis.com/v1/images:annotate?key=${ocrKey}`, {\n\t\t\tmethod: 'POST',\n\t\t\tbody: JSON.stringify({\n\t\t\t\trequests: [\n\t\t\t\t\t{\n\t\t\t\t\t\timage: {\n\t\t\t\t\t\t\tcontent: base64\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfeatures: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'TEXT_DETECTION'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\timageContext: {\n\t\t\t\t\t\t\tlanguageHints: [lang]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t})\n\t\t});\n\t\tconst res = await response.json();\n\n\t\t// const { data } = await worker.recognize(canvas);\n\t\tconsole.log(res);\n\t\tboxes = res.responses[0].textAnnotations;\n\t\t// await worker.terminate();\n\t})();\n}\n\nlet files = [];\nconst options = {\n\tmaxWidth: window.innerWidth,\n\tmaxHeight: window.innerHeight * 0.92,\n\tcanvas: true,\n\torientation: true,\n\tcover: true\n};\n\n$: file = files[0];\n$: if (file) window.loadImage(file, imageLoaded, options);\n</script>\n\n<style>\n\t.open-camera {\n\t\tposition: fixed;\n\t\twidth: 100%;\n\t\theight: 8%;\n\t\tbottom: 0;\n\t\tbackground-color: #6699cc;\n\t\tborder-top-left-radius: 5px;\n\t\tborder-top-right-radius: 5px;\n\t}\n\t.open-camera:after {\n\t\tcontent: 'Take picture!';\n\t\tposition: absolute;\n\t\tcolor: #000;\n\t\ttop: 50%;\n\t\tfont-size: 20px;\n\t\tfont-family: Helvetica, sans-serif;\n\t\tleft: 50%;\n\t\tpointer-events: none;\n\t\ttransform: translate(-50%, -50%);\n\t}\n\t.open-camera:hover {\n\t\tbackground-color: #538cc6;\n\t}\n\tinput {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\topacity: 0;\n\t\tcursor: pointer;\n\t}\n\n\timg {\n\t\tmax-width: 100%;\n\t\tmax-height: 90vh;\n\t\tvisibility: hidden;\n\t}\n\n\t.image-container {\n\t\tposition: relative;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, 0);\n\t\toverflow-y: scroll;\n\t\toverflow-x: hidden;\n\t}\n\n\tcanvas{\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t}\n\t.image-overlay {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\t.wtt {\n\t\theight: 70% !important;\n\t}\n</style>\n\n<div\n\tclass=\"image-container\"\n\tstyle=\"width:{width}px; height:{height}px;\"\n\tbind:this={imageContainer}\n\tclass:wtt={wtt !== null}\n>\n\t<div class=\"canvas-container\" bind:this={canvasContainer}></div>\n\t<div\n\t\tclass=\"image-overlay\"\n\t>\n\t<svg\n\t\t{width}\n\t\t{height}\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t>\n\t\t{#if boxes}\n\t\t\t{#each boxes as box}\n\t\t\t\t{#if !box.locale}\n\t\t\t\t\t<Box {box} />\n\t\t\t\t{/if}\n\t\t\t{/each}\n\t\t{/if}\n\t</svg>\n\t</div>\n</div>\n\n{#if wtt !== null}\n\t<TranslateDrawer/>\n{/if}\n<div class=\"open-camera\">\n\t<input\n\t\ttype=\"file\"\n\t\tcapture=\"camera\"\n\t\taccept=\"image/*\"\n\t\tname=\"cameraInput\"\n\t\tbind:files\n\t>\n</div>\n",
    "<script>\nimport { wordToTranslate } from '../modules/stores.js';\nexport let box;\n\nlet activeWord;\n\nwordToTranslate.subscribe(val => {\n\tactiveWord = val;\n});\n\nfunction sendForTranslation () {\n\twordToTranslate.set(box.description);\n}\n</script>\n\n<style>\n\t.box {\n\t\tfill: transparent;\n\t\tstoke-width: 1px;\n\t\tstroke: red;\n\t}\n\t.active {\n\t\tfill: rgba(255, 0, 0, .35);\n\t}\n</style>\n\n<svelte:options namespace='svg'/>\n\n<rect\n\tclass=\"box {box.description === activeWord ? 'active' : ''}\"\n\tx={box.boundingPoly.vertices[0].x}\n\ty={box.boundingPoly.vertices[0].y}\n\twidth={box.boundingPoly.vertices[1].x - box.boundingPoly.vertices[0].x}\n\theight={box.boundingPoly.vertices[2].y - box.boundingPoly.vertices[0].y}\n\ton:click={sendForTranslation}\n\t></rect>\n",
    "<script>\nimport { wordToTranslate } from '../modules/stores.js';\nimport { onMount } from 'svelte';\n\nlet wtt;\nlet translations;\nlet input;\n\nconst sourceLang = 'fr';\nconst targetLang = 'en';\n\nconst key = window.localStorage.getItem('translate_key');\n\nonMount(() => {\n\twordToTranslate.subscribe(val => {\n\t\tif (document.activeElement !== input) {\n\t\t\tinput.value = sanitize(val);\n\t\t}\n\t\twtt = val;\n\t\tdoTranslation(val);\n\t});\n});\n\nasync function doTranslation (val) {\n\tconst response = await window.fetch(`https://translation.googleapis.com/language/translate/v2?q=${val}&source=${sourceLang}&target=${targetLang}&key=${key}`, {\n\t\tmethod: 'POST'\n\t});\n\tconst res = await response.json();\n\ttranslations = res.data.translations;\n}\n\nfunction destroy () {\n\tinput.value = null;\n\twordToTranslate.set(null);\n}\n\nfunction sanitize (val) {\n\treturn val.replace(/(\\.|!|\\?|,)/g, '');\n}\n</script>\n\n<style>\n\t.translate-drawer {\n\t\tbackground-color: #e8e5de;\n\t\tcolor: #000;\n\t\tpadding: 20px;\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\ttop: 70%;\n\t\tz-index: 9;\n\t}\n\tinput {\n\t\tbackground-color: #f2f0ec;\n\t\tborder-radius: 5px;\n\t\twidth: 100%;\n\t}\n\t.translated-text {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t}\n\t.close-btn {\n\t\tbackground-color: #99cc99;\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\theight: 2%;\n\t\tleft: 0;\n\t\tright: 0;\n\t\ttext-align: center;\n\t\tpadding: 20px 0;\n\t\tcursor: pointer;\n\t\tborder-top: 1px solid #000;\n\t}\n\t.close-btn:after {\n\t\tcontent: 'Close';\n\t\tposition: absolute;\n\t\tcolor: #000;\n\t\ttop: 50%;\n\t\tfont-size: 20px;\n\t\tfont-family: Helvetica, sans-serif;\n\t\tleft: 50%;\n\t\tpointer-events: none;\n\t\ttransform: translate(-50%, -50%);\n\t}\n\n\t.close-btn:hover {\n\t\tbackground-color: #85c185;\n\t}\n\t.close-btn:active {\n\t\tbackground-color: #7bbc7b;\n\t}\n</style>\n\n{#if wtt !== null}\n\t<div\n\t\tclass=\"translate-drawer\"\n\t>\n\t\t<input bind:this={input} type=\"search\" on:input={(e) => wordToTranslate.set(e.target.value)}/>\n\t\t<div\n\t\t\tclass=\"translated-text\"\n\t\t>\n\t\t\t{#if translations}\n\t\t\t\t{#each translations as translation}\n\t\t\t\t\t<div class=\"translated-word\">{sanitize(translation.translatedText)}</div>\n\t\t\t\t{/each}\n\t\t\t{/if}\n\t\t</div>\n\t\t<div class=\"close-btn\" on:click=\"{destroy}\"></div>\n\t</div>\n{/if}\n"
  ],
  "names": [],
  "mappings": "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"
}