var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function s(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function f(){return u(" ")}function d(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function x(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function g(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}let p;function h(t){p=t}const b=[],m=[],$=[],v=[],y=Promise.resolve();let w=!1;function _(t){$.push(t)}function D(){const t=new Set;do{for(;b.length;){const t=b.shift();h(t),E(t.$$)}for(;m.length;)m.pop()();for(let e=0;e<$.length;e+=1){const n=$[e];t.has(n)||(n(),t.add(n))}$.length=0}while(b.length);for(;v.length;)v.pop()();w=!1}function E(t){t.fragment&&(t.update(t.dirty),o(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(_))}const k=new Set;let R;function j(){R={r:0,c:[],p:R}}function z(){R.r||o(R.c),R=R.p}function A(t,e){t&&t.i&&(k.delete(t),t.i(e))}function L(t,e,n,o){if(t&&t.o){if(k.has(t))return;k.add(t),R.c.push(()=>{k.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function N(t,n,r){const{fragment:a,on_mount:c,on_destroy:l,after_update:s}=t.$$;a.m(n,r),_(()=>{const n=c.map(e).filter(i);l?l.push(...n):o(n),t.$$.on_mount=[]}),s.forEach(_)}function O(t,e){t.$$.fragment&&(o(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function P(t,e){t.$$.dirty||(b.push(t),w||(w=!0,y.then(D)),t.$$.dirty=n()),t.$$.dirty[e]=!0}function T(e,i,r,a,c,l){const s=p;h(e);const u=i.props||{},f=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(s?s.$$.context:[]),callbacks:n(),dirty:null};let d=!1;var x;f.ctx=r?r(e,u,(t,n,o=n)=>(f.ctx&&c(f.ctx[t],f.ctx[t]=o)&&(f.bound[t]&&f.bound[t](o),d&&P(e,t)),n)):u,f.update(),d=!0,o(f.before_update),f.fragment=a(f.ctx),i.target&&(i.hydrate?f.fragment.l((x=i.target,Array.from(x.childNodes))):f.fragment.c(),i.intro&&A(e.$$.fragment),N(e,i.target,i.anchor),D()),h(s)}class B{$destroy(){O(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function C(e){var n,o;return{c(){x(n=s("div"),"class","box svelte-1uepgxv"),g(n,"left",e.box.bbox.x0+"px"),g(n,"top",e.box.bbox.y0+"px"),g(n,"width",e.box.bbox.x1-e.box.bbox.x0+"px"),g(n,"height",e.box.bbox.y1-e.box.bbox.y0+"px"),o=d(n,"click",e.log)},m(t,e){c(t,n,e)},p(t,e){t.box&&(g(n,"left",e.box.bbox.x0+"px"),g(n,"top",e.box.bbox.y0+"px"),g(n,"width",e.box.bbox.x1-e.box.bbox.x0+"px"),g(n,"height",e.box.bbox.y1-e.box.bbox.y0+"px"))},i:t,o:t,d(t){t&&l(n),o()}}}function S(t,e,n){let{box:o}=e;return t.$set=(t=>{"box"in t&&n("box",o=t.box)}),{box:o,log:function(){console.log(o.text)}}}class q extends B{constructor(t){super(),T(this,t,S,C,r,["box"])}}function F(t,e,n){const o=Object.create(t);return o.box=e[n],o}function I(t){var e;return{c(){x(e=s("img"),"src",t.imageData),x(e,"alt","uploaded image"),x(e,"class","svelte-10o2vxv")},m(n,o){c(n,e,o),t.img_binding(e)},p(t,n){t.imageData&&x(e,"src",n.imageData)},d(n){n&&l(e),t.img_binding(null)}}}function M(t){var e,n;let o=t.boxes,i=[];for(let e=0;e<o.length;e+=1)i[e]=U(F(t,o,e));const r=t=>L(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=u("")},m(t,o){for(let e=0;e<i.length;e+=1)i[e].m(t,o);c(t,e,o),n=!0},p(t,n){if(t.boxes){let a;for(o=n.boxes,a=0;a<o.length;a+=1){const r=F(n,o,a);i[a]?(i[a].p(t,r),A(i[a],1)):(i[a]=U(r),i[a].c(),A(i[a],1),i[a].m(e.parentNode,e))}for(j(),a=o.length;a<i.length;a+=1)r(a);z()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)A(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)L(i[t]);n=!1},d(t){!function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(i,t),t&&l(e)}}}function U(t){var e,n=new q({props:{box:t.box}});return{c(){n.$$.fragment.c()},m(t,o){N(n,t,o),e=!0},p(t,e){var o={};t.boxes&&(o.box=e.box),n.$set(o)},i(t){e||(A(n.$$.fragment,t),e=!0)},o(t){L(n.$$.fragment,t),e=!1},d(t){O(n,t)}}}function W(t){var e,n,o,i,r,u,p,h,b=t.imageData&&I(t),m=t.boxes&&M(t);return{c(){e=s("div"),b&&b.c(),n=f(),o=s("div"),m&&m.c(),i=f(),r=s("div"),u=s("input"),x(o,"class","image-overlay svelte-10o2vxv"),x(e,"class","image-container svelte-10o2vxv"),g(e,"width",t.width+"px"),g(e,"height",t.height+"px"),x(u,"type","file"),x(u,"capture","camera"),x(u,"accept","image/*"),x(u,"name","cameraInput"),x(u,"class","svelte-10o2vxv"),x(r,"class","open-camera svelte-10o2vxv"),h=d(u,"change",t.input_change_handler)},m(t,l){c(t,e,l),b&&b.m(e,null),a(e,n),a(e,o),m&&m.m(o,null),c(t,i,l),c(t,r,l),a(r,u),p=!0},p(t,i){i.imageData?b?b.p(t,i):((b=I(i)).c(),b.m(e,n)):b&&(b.d(1),b=null),i.boxes?m?(m.p(t,i),A(m,1)):((m=M(i)).c(),A(m,1),m.m(o,null)):m&&(j(),L(m,1,1,()=>{m=null}),z()),p&&!t.width||g(e,"width",i.width+"px"),p&&!t.height||g(e,"height",i.height+"px")},i(t){p||(A(m),p=!0)},o(t){L(m),p=!1},d(t){t&&l(e),b&&b.d(),m&&m.d(),t&&(l(i),l(r)),h()}}}const G="fra";function H(t,e,n){let o,i,r,a,c;const l=window.Tesseract.createWorker({logger:t=>console.log(t)});!async function(){await l.load(),await l.setParameters({tessjs_create_box:1}),await l.loadLanguage(G),await l.initialize(G),console.log("done initializing")}();const s=new window.FileReader;n("fileReader",s.onload=function(){n("imageData",a=s.result),setTimeout(()=>{n("width",i=o.width),n("height",r=o.height),(async()=>{console.log("recognizing"),console.log(o.width);const{data:t}=await l.recognize(o);console.log(t.text),n("boxes",c=t.words),console.log("boxes",c)})()},1e3)},s);let u,f=[];return t.$$.update=((t={files:1,file:1,fileReader:1})=>{t.files&&n("file",u=f[0]),(t.file||t.fileReader)&&u&&s.readAsDataURL(u)}),{image:o,width:i,height:r,imageData:a,boxes:c,files:f,img_binding:function(t){m[t?"unshift":"push"](()=>{n("image",o=t)})},input_change_handler:function(){f=this.files,n("files",f)}}}class J extends B{constructor(t){super(),T(this,t,H,W,r,[])}}function K(e){var n,o=new J({});return{c(){o.$$.fragment.c()},m(t,e){N(o,t,e),n=!0},p:t,i(t){n||(A(o.$$.fragment,t),n=!0)},o(t){L(o.$$.fragment,t),n=!1},d(t){O(o,t)}}}return new class extends B{constructor(t){super(),T(this,t,null,K,r,[])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
