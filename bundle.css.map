{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../src/App.svelte",
    "../src/components/Camera.svelte",
    "../src/components/Box.svelte",
    "../src/components/TranslateDrawer.svelte"
  ],
  "sourcesContent": [
    "<script>\n\timport Camera from './components/Camera.svelte';\n</script>\n\n<style>\n\t:global(body) {\n\t\tbackground-color: #000;\n\t}\n</style>\n\n<Camera/>\n\n",
    "<script>\n// import scaleCanvas from '../modules/scaleCanvas.js';\nimport Box from './Box.svelte';\nimport TranslateDrawer from './TranslateDrawer.svelte';\nimport { onMount } from 'svelte';\nimport { wordToTranslate } from '../modules/stores.js';\n\nlet image;\nlet width;\nlet height;\nlet imageData;\nlet boxes;\nlet wtt;\n\nconst lang = 'fra';\n\nwordToTranslate.subscribe(val => {\n\twtt = val;\n});\n\nconst worker = window.Tesseract.createWorker({\n\tlogger: m => console.log(m)\n});\n\nasync function init () {\n\tawait worker.load();\n\tawait worker.setParameters({\n\t\ttessjs_create_box: 1\n\t});\n\tawait worker.loadLanguage(lang);\n\tawait worker.initialize(lang);\n\tconsole.log('done initializing');\n}\n\ninit();\n\nconst fileReader = new window.FileReader();\nfileReader.onload = function () {\n\timageData = fileReader.result;\n};\n\nfunction doOcr () {\n\t(async () => {\n\t\t/* --------------------------------------------\n\t\t * Create a ghost canvas\n\t\t */\n\t\tconst canvas = document.createElement('canvas');\n\t\tconst ctx = canvas.getContext('2d');\n\t\tcanvas.width = width;\n\t\tcanvas.height = height;\n\t\tctx.drawImage(image, 0, 0, width, height);\n\n\t\tconst { data } = await worker.recognize(canvas);\n\t\tconsole.log(data.text);\n\t\tboxes = data.words;\n\t\t// await worker.terminate();\n\t})();\n}\n\nfunction setDimensions() {\n\t({ width, height } = this);\n\tdoOcr();\n}\n\nlet files = [];\n\n$: file = files[0];\n$: if (file) fileReader.readAsDataURL(file);\n</script>\n\n<style>\n\t.open-camera {\n\t\tposition: fixed;\n\t\twidth: 100%;\n\t\theight: 10%;\n\t\tbottom: 0;\n\t\tbackground-color: #6699cc;\n\t\tborder-top-left-radius: 5px;\n\t\tborder-top-right-radius: 5px;\n\t}\n\t.open-camera:after {\n\t\tcontent: 'Take picture';\n\t\tposition: absolute;\n\t\tcolor: #fff;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tfont-weight: bold;\n\t\ttransform: translate(-50%, -50%);\n\t}\n\t.open-camera:hover {\n\t\tbackground-color: #538cc6;\n\t}\n\tinput {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\topacity: 0;\n\t\tcursor: pointer;\n\t}\n\n\timg {\n\t\tmax-width: 100%;\n\t\tmax-height: 90vh;\n\t}\n\n\t.image-container {\n\t\tposition: relative;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, 0);\n\t}\n\n\t.image-overlay {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n</style>\n\n<div\n\tclass=\"image-container\"\n\tstyle=\"width:{width}px; height:{height}px\"\n>\n\t{#if imageData}\n\t\t<img\n\t\t\tsrc=\"{imageData}\"\n\t\t\talt=\"uploaded image\"\n\t\t\tbind:this={image}\n\t\t\ton:load={setDimensions}\n\t\t/>\n\t{/if}\n\t<div\n\t\tclass=\"image-overlay\"\n\t>\n\t\t{#if boxes}\n\t\t\t{#each boxes as box}\n\t\t\t\t<Box\n\t\t\t\t\t{box}\n\t\t\t\t/>\n\t\t\t{/each}\n\t\t{/if}\n\t</div>\n</div>\n\n{#if wtt}\n\t<TranslateDrawer/>\n{/if}\n<div class=\"open-camera\">\n\t<input\n\t\ttype=\"file\"\n\t\tcapture=\"camera\"\n\t\taccept=\"image/*\"\n\t\tname=\"cameraInput\"\n\t\tbind:files\n\t>\n</div>\n",
    "<script>\nimport { wordToTranslate } from '../modules/stores.js';\nexport let box;\n\nlet activeWord;\n\nwordToTranslate.subscribe(val => {\n\tactiveWord = val;\n});\nfunction sendForTranslation () {\n\twordToTranslate.set(box.text);\n}\n</script>\n\n<style>\n\t.box {\n\t\tposition: absolute;\n\t\tborder: 1px solid red;\n\t}\n\t.active {\n\t\tbackground-color: rgba(255, 0, 0, .35);\n\t}\n</style>\n\n<div\n\tclass=\"box {box.text === activeWord ? 'active' : ''}\"\n\tstyle=\"left: {box.bbox.x0}px; top: {box.bbox.y0}px; width: {box.bbox.x1 - box.bbox.x0}px; height: {box.bbox.y1 - box.bbox.y0}px\"\n\ton:click={sendForTranslation}\n\t></div>\n",
    "<script>\nimport { wordToTranslate } from '../modules/stores.js';\n\nlet wtt;\nlet translations;\n\nconst sourceLang = 'fr';\nconst targetLang = 'en';\n\nconst key = window.localStorage.getItem('googleKey');\n\nwordToTranslate.subscribe(val => {\n\twtt = val;\n\tdoTranslation(val);\n});\n\nasync function doTranslation (val) {\n\tconst response = await window.fetch(`https://translation.googleapis.com/language/translate/v2?q=${val}&source=${sourceLang}&target=${targetLang}&key=${key}`, {\n\t\tmethod: 'POST'\n\t});\n\tconst res = await response.json();\n\ttranslations = res.data.translations;\n};\n</script>\n\n<style>\n\t.translate-drawer {\n\t\tbackground-color: #fff;\n\t\tcolor: #000;\n\t\tpadding: 8px;\n\t\tborder-top-left-radius: 5px;\n\t\tborder-top-right-radius: 5px;\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\ttop: 70%;\n\t}\n</style>\n\n{#if wtt}\n\t<div\n\t\tclass=\"translate-drawer\"\n\t>\n\t\t<input type=\"text\" value=\"{wtt}\"/>\n\t\t<div\n\t\t\tclass=\"translated-text\"\n\t\t>\n\t\t\t{#if translations}\n\t\t\t\t{#each translations as translation}\n\t\t\t\t\t<p>{translation.translatedText}</p>\n\t\t\t\t{/each}\n\t\t\t{/if}\n\n\t\t</div>\n\t</div>\n{/if}\n"
  ],
  "names": [],
  "mappings": "AAKS,IAAI,AAAE,CAAC,AACd,gBAAgB,CAAE,IAAI,AACvB,CAAC;ACgED,YAAY,cAAC,CAAC,AACb,QAAQ,CAAE,KAAK,CACf,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,GAAG,CACX,MAAM,CAAE,CAAC,CACT,gBAAgB,CAAE,OAAO,CACzB,sBAAsB,CAAE,GAAG,CAC3B,uBAAuB,CAAE,GAAG,AAC7B,CAAC,AACD,0BAAY,MAAM,AAAC,CAAC,AACnB,OAAO,CAAE,cAAc,CACvB,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,GAAG,CAAE,GAAG,CACR,IAAI,CAAE,GAAG,CACT,WAAW,CAAE,IAAI,CACjB,SAAS,CAAE,UAAU,IAAI,CAAC,CAAC,IAAI,CAAC,AACjC,CAAC,AACD,0BAAY,MAAM,AAAC,CAAC,AACnB,gBAAgB,CAAE,OAAO,AAC1B,CAAC,AACD,KAAK,cAAC,CAAC,AACN,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,CAAC,CACV,MAAM,CAAE,OAAO,AAChB,CAAC,AAED,GAAG,cAAC,CAAC,AACJ,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,IAAI,AACjB,CAAC,AAED,gBAAgB,cAAC,CAAC,AACjB,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,GAAG,CACT,SAAS,CAAE,UAAU,IAAI,CAAC,CAAC,CAAC,CAAC,AAC9B,CAAC,AAED,cAAc,cAAC,CAAC,AACf,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACN,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACb,CAAC;ACrGD,IAAI,eAAC,CAAC,AACL,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,GAAG,AACtB,CAAC,AACD,OAAO,eAAC,CAAC,AACR,gBAAgB,CAAE,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AACvC,CAAC;ACKD,iBAAiB,cAAC,CAAC,AAClB,gBAAgB,CAAE,IAAI,CACtB,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,GAAG,CACZ,sBAAsB,CAAE,GAAG,CAC3B,uBAAuB,CAAE,GAAG,CAC5B,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,CAAC,CACR,MAAM,CAAE,CAAC,CACT,GAAG,CAAE,GAAG,AACT,CAAC"
}